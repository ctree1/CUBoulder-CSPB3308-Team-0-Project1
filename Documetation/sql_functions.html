<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>sql_functions API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sql_functions</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import sqlite3

def bathroom_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;
    Insert bathroom values into database.
    Values should be in the form dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string} 
    &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]        #split dictionary into individual variables
    bathroomType = value[&#39;type&#39;]
    bathroomComment = value[&#39;comment&#39;]
    bathroomDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO bathroom (babyID, bathroomType, bathroomDateTime, bathroomComment) VALUES(?, ?, ?, ?);&#34;, (babyID, bathroomType, bathroomDateTime, bathroomComment))
    conn.commit()
    conn.close()
    # return error/success code

def add_prefs(pref_dict, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Add the requested preferences to the database. 
    Preferences should be in the format {liquid, weight, height} with values either 1 for Imperial, 2 for metric. &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DROP TABLE IF EXISTS preferences;&#34;)
    cur.execute(&#34;CREATE TABLE preferences (liquidUnits DECIMAL DEFAULT 1, weightUnits DECIMAL DEFAULT 1, heightUnits INTEGER DEFAULT 1);&#34;)
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;INSERT INTO preferences (liquidUnits, weightUnits, heightUnits) VALUES (?, ?, ?);&#34;,(pref_dict[&#39;liquidUnits&#39;],pref_dict[&#39;weightUnits&#39;], pref_dict[&#39;heightUnits&#39;]))
    
    conn.commit()
    conn.close()
    #return error/success code


def bathroom_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the bathroom table
    Return values as list[EventID, Name, Date, Type, Comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    cur.execute(&#34;SELECT\
        bathroom.bathroomEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        bathroom.bathroomDateTime as &#39;Time&#39;,\
        bathroomType.bathroomTypeName as &#39;Type&#39;,\
        bathroom.bathroomComment as &#39;Comment&#39; FROM bathroom\
        LEFT JOIN babies ON bathroom.babyID = babies.babyID\
        LEFT JOIN bathroomType ON bathroom.bathroomType = bathroomType.bathroomTypeID\
        ORDER BY bathroomDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()
    bathroom_recent_lst = []
    for row in rows:
        row_array = [row[0], row[1], row[2], row[3], row[4]]
        bathroom_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return bathroom_recent_lst

def sleep_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the sleep table
    Return values as list[EventID, Name, Date, Type, Comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    cur.execute(&#34;SELECT\
        sleep.sleepEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        sleep.sleepDateTime as &#39;Time&#39;,\
        sleepType.sleepTypeName as &#39;Type&#39;,\
        sleep.sleepComment as &#39;Comment&#39;,\
        round(24 * (JULIANDAY(sleep.sleepDateTime) - LAG(JULIANDAY(sleep.sleepDateTime)) OVER (ORDER BY sleep.sleepDateTime)),1) AS &#39;Previous Duration, hrs&#39;\
        FROM sleep\
        LEFT JOIN babies ON sleep.babyID = babies.babyID\
        LEFT JOIN sleepType ON sleep.sleepType = sleepType.sleepTypeID\
        ORDER BY sleep.sleepDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()
    
    sleep_recent_lst = []
    for row in rows:
        row_array = (row[0], row[1], row[2], row[3], row[4], row[5])
        sleep_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return sleep_recent_lst   


def get_babies(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Returns list of tuples from baby.db [(babyID, eventType, birthdate, firstName, lastName)]
    Used to populate selection from baby drop down menus.&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for all babies stored in db
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT * FROM babies&#34;)
    baby_lst = cur.fetchall()
    conn.close()
    return baby_lst

def get_last_baby_bathroom(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Bathroom table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in bathroom
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM bathroom ORDER BY bathroomDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid

def get_last_baby_sleep(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Sleep table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in sleep
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM sleep ORDER BY sleepDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid
    
def get_last_baby_feed(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Feed table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in sleep
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM feed ORDER BY feedDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid

def add_baby(baby_dict, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Inserts a new baby into the baby table. 
    Requires dict argument with values {birthdate, firstName, lastName, abbreviation, weight, height)&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    #initials=baby_dict[&#39;firstName&#39;][0] + baby_dict[&#39;lastName&#39;][0]
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;INSERT INTO babies (birthDate, firstName, lastName, abbreviatedName, birthWeight, birthHeight) VALUES (?, ?, ?, ?, ?, ?);&#34;,(baby_dict[&#39;birthDate&#39;], baby_dict[&#39;firstName&#39;], baby_dict[&#39;lastName&#39;], baby_dict[&#39;abbreviation&#39;], baby_dict[&#39;birthWeight&#39;], baby_dict[&#39;birthHeight&#39;]))
    
    conn.commit()
    conn.close()
    #return error/success code


def sleep_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Insert values into the sleep table.
    Values should be python dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string} &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]        #split dictionary into individual variables
    sleepType = value[&#39;type&#39;]
    sleepComment = value[&#39;comment&#39;]
    sleepDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO sleep (babyID, sleepType, sleepDateTime, sleepComment) VALUES(?, ?, ?, ?);&#34;, (babyID, sleepType, sleepDateTime, sleepComment))
    conn.commit()
    conn.close()
    # return error/success code

#feed function, added for testing
def feed_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Insert values into the feed table.
    Values are  converted from imperial/metric based on preferences table.
    &#34;&#34;&#34;
    
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]       #split dictionary into individual variables
    leftBreastDur, rightBreastDur, leftPumpQty, rightPumpQty, bottleBreastQty, bottleFormulaQty = None,None,None,None,None,None
    prefs = get_prefs()
    
    if(value[&#39;breastSide&#39;] == 1):
        leftBreastDur = value[&#39;duration&#39;]
    elif(value[&#39;breastSide&#39;] == 2):
        rightBreastDur = value[&#39;duration&#39;]
    elif(value[&#39;pumpSide&#39;] == 1):
        leftPumpQty = value[&#39;quantity&#39;]
        if(prefs[0] == 2):
            leftPumpQty = round(float(leftPumpQty) / 29.5735, 2)
    elif(value[&#39;pumpSide&#39;] == 2):
        rightPumpQty = value[&#39;quantity&#39;]
        if(prefs[0] == 2):
            rightPumpQty = round(float(rightPumpQty) / 29.5735, 2)
    elif(value[&#39;bottleType&#39;] == 1):
        bottleBreastQty = value[&#39;quantity&#39;] 
        if(prefs[0] == 2):
            bottleBreastQty = round(float(bottleBreastQty) / 29.5735, 2)
    elif(value[&#39;bottleType&#39;] == 2):
        bottleFormulaQty = value[&#39;quantity&#39;]  
        if(prefs[0] == 2):
            bottleFormulaQty = round(float(bottleFormulaQty) / 29.5735, 2) 
    feedComment = value[&#39;comment&#39;]
    feedDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO feed (\
        babyID,leftBreastDur,rightBreastDur,leftPumpQty,\
        rightPumpQty,bottleBreastQty,bottleFormulaQty,\
        feedDateTime, feedComment) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?);&#34;
        ,(babyID, leftBreastDur, rightBreastDur, leftPumpQty, rightPumpQty, bottleBreastQty, bottleFormulaQty, feedDateTime, feedComment))
    conn.commit()
    conn.close()

def delete_rows(table, eventID, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Deletes a selected row from a table.
    Requires arguments of table and eventID. &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DELETE FROM &#34; + str(table) + &#34;\
        WHERE &#34; + str(table) + &#34;EventID = &#34; + str(eventID) + &#34;;&#34;)
        #Example DELETE FROM sleep WHERE sleepEventID = 10;
        #This should be interchangeable between all menus assuming the naming convention works
    conn.commit()
    conn.close()

def delete_preferences(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Deletes the preferences table&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DELETE * FROM preferences;&#34;)

    conn.commit()
    conn.close()

def feed_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the feed table. Converts values from imperial/metric based on preferences.
    Return values as list[EventID, Name, Date, leftDuration, rightDuration, totalduration, leftPumpQty, rightPumpQTY
    totalPumpQTY, breastQTY, formulatQTY, comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()

    cur.execute(&#34;SELECT\
        feed.feedEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        feed.feedDateTime as &#39;Time&#39;,\
        feed.leftBreastDur as &#39;Left Breast, min&#39;,\
        feed.rightBreastDur as &#39;Right Breast, min&#39;,\
        feed.totalBreastDur as &#39;Total Breast, min&#39;,\
        feed.leftPumpQty as &#39;Left Pump Qty&#39;,\
        feed.rightPumpQty as &#39;Right Pump Qty&#39;,\
        feed.totalPumpQty as &#39;Total Pump Qty&#39;,\
        feed.bottleBreastQty as &#39;Bottle Breast Qty&#39;,\
        feed.bottleFormulaQty as &#39;Bottle Formula Qty&#39;,\
        feed.totalBottleQty as &#39;Total Bottle Qty&#39;,\
        feed.feedComment as &#39;Comment&#39; FROM feed\
        LEFT JOIN babies ON feed.babyID = babies.babyID\
        ORDER BY feedDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()

    feed_recent_lst = []
    for row in rows:
        feed = row[0]
        name = row[1]
        dateTime = row[2]
        leftBreast = row[3]
        rightBreast = row[4]
        totalBreast = row[5]
        
        leftPump = row[6]
        if(leftPump != None):
            leftPump = round(convert_units(leftPump,0,0)[0],2)

        rightPump = row[7]
        if(rightPump != None):
            rightPump = round(convert_units(rightPump,0,0)[0],2)
        
        totalPump = row[8]
        if(totalPump != None):
            totalPump = convert_units(totalPump,0,0)[0]

        bottleBreast = row[9]
        if(bottleBreast != None):
            bottleBreast = round(convert_units(bottleBreast,0,0)[0],2)

        bottleFormula = row[10]
        if(bottleFormula != None):
            bottleFormula = round(convert_units(bottleFormula,0,0)[0],2)

        totalBottle = row[11]
        if(totalBottle != None):
            totalBottle = convert_units(totalBottle,0,0)[0]

        comment = row[12]
        row_array = (feed, name, dateTime, leftBreast, rightBreast, totalBreast, leftPump, rightPump, totalPump, bottleBreast, bottleFormula, totalBottle, comment)
        feed_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return feed_recent_lst

def read_sql(queryName):
    &#34;&#34;&#34;Queries the database with argument queryName&#34;&#34;&#34;
    with open(queryName)as q:
        query_text = q.read()
    return query_text

def reset_db(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Reset the database to default values for testing purposes.&#34;&#34;&#34;
    # read sql file in stead of hard coding -
   
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateBabiesTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddBaby.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateBathroomTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddBathroom.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateSleepTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddSleep.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateFeedTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddFeed.sql&#34;))

    conn.commit()
    conn.close()

def get_prefs(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Returns the selected preferences of the table (1,1,1) (liquid, weight, height)&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;SELECT * FROM preferences;&#34;)
    
    pref_lst = cur.fetchall()
    conn.close()
    pref_lst = pref_lst[0]
    #prefs = {&#34;liquid&#34;:pref_lst[0], &#34;weight&#34;:pref_lst[1], &#34;height&#34;:pref_lst[2]}
    return list(pref_lst)  # Jinja has issues passing tuples to javascript function. Change to list.      # return error/success code    


def convert_units(liquid, weight, height):
    &#34;&#34;&#34;Convert the units of measurement from imperial to metric.
    Convert the units to that of preferences, pass in values for liquid, weight, and height.
    If units are not necessary, pass in value of 0.
    e.g for eat view, convert only liquids, pass values of (12, 0, 0). 
    &#34;&#34;&#34;
    prefs = get_prefs()
    liquid_flag = prefs[0]
    weight_flag = prefs[1]
    height_flag = prefs[2]
    liquid_ret = liquid
    weight_ret = weight
    height_ret = height
    if(liquid_flag != 1):
        liquid_ret = liquid_ret * 29.5735
    if(weight_flag != 1):
        weight_ret = weight_ret * 0.453582    
    if(height_flag != 1):
        height_ret = height_ret * 2.54
    return(liquid_ret, weight_ret, height_ret)

class Baby:
    &#34;&#34;&#34;Define class baby for unit testing. &#34;&#34;&#34;
    def __init__(self, rows):
        self.babyID = []
        self.eventType = []
        self.birthDate = []
        self.firstName = []
        self.lastName = []
        self.abbreviatedName = []
        self.birthWeight = []
        self.birthHeight = []
        for row in rows:
            self.babyID.append(row[0])
            self.eventType.append(row[1])
            self.birthDate.append(row[2])
            self.firstName.append(row[3])
            self.lastName.append(row[4])
            self.abbreviatedName.append(row[5])
            self.birthWeight.append(row[6])
            self.birthHeight.append(row[7])

class Bathroom:
    &#34;&#34;&#34;Define class bathroom for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        self.bathroomEventID = []
        self.eventType = []
        self.babyID = []
        self.bathroomType = []
        self.bathroomDateTime = []
        self.bathroomComment = []
        for row in rows:
            self.bathroomEventID.append(row[0])
            self.eventType.append(row[1])
            self.babyID.append(row[2])
            self.bathroomType.append(row[3])
            self.bathroomDateTime.append(row[4])
            self.bathroomComment.append(row[5])
        
class Sleep:
    &#34;&#34;&#34;Define sleep baby for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        self.sleepEventID = []
        self.eventType = []
        self.babyID = []
        self.sleepType = []
        self.sleepDateTime = []
        self.sleepComment = []
        for row in rows:
            self.sleepEventID.append(row[0])
            self.eventType.append(row[1])
            self.babyID.append(row[2])
            self.sleepType.append(row[3])
            self.sleepDateTime.append(row[4])
            self.sleepComment.append(row[5])
    
class Feed:
    &#34;&#34;&#34;Define class Feed for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        feedEventID = []
        eventType = []
        babyID = []
        leftBreastDur = []
        rigthBreastDur = []
        totalBreastDur = []
        leftPumpQty = []
        rightPumpQty = []
        totalPumpQty = []
        bottleBreastQty = []
        bottleFormulaQty = []
        totalBottleQty = []
        feedDateTime = []
        feedComment = []
        for row in rows:
            feedEventID.append(row[0])
            eventType.append(row[1])
            babyID.append(row[2])
            leftBreastDur.append(row[3])
            rigthBreastDur.append(row[4])
            totalBreastDur.append(row[5])
            leftPumpQty.append(row[6])
            rightPumpQty.append(row[7])
            totalPumpQty.append(row[8])
            bottleBreastQty.append(row[9])
            bottleFormulaQty.append(row[10])
            totalBottleQty.append(row[11])
            feedDateTime.append(row[12])
            feedComment.append(row[13])

#bathroom_recent_events()
#sleep_recent_events()
#delete_rows(&#34;sleep&#34;, 11)
#feed_recent_events()
#reset_db()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sql_functions.add_baby"><code class="name flex">
<span>def <span class="ident">add_baby</span></span>(<span>baby_dict, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Inserts a new baby into the baby table.
Requires dict argument with values {birthdate, firstName, lastName, abbreviation, weight, height)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_baby(baby_dict, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Inserts a new baby into the baby table. 
    Requires dict argument with values {birthdate, firstName, lastName, abbreviation, weight, height)&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    #initials=baby_dict[&#39;firstName&#39;][0] + baby_dict[&#39;lastName&#39;][0]
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;INSERT INTO babies (birthDate, firstName, lastName, abbreviatedName, birthWeight, birthHeight) VALUES (?, ?, ?, ?, ?, ?);&#34;,(baby_dict[&#39;birthDate&#39;], baby_dict[&#39;firstName&#39;], baby_dict[&#39;lastName&#39;], baby_dict[&#39;abbreviation&#39;], baby_dict[&#39;birthWeight&#39;], baby_dict[&#39;birthHeight&#39;]))
    
    conn.commit()
    conn.close()
    #return error/success code</code></pre>
</details>
</dd>
<dt id="sql_functions.add_prefs"><code class="name flex">
<span>def <span class="ident">add_prefs</span></span>(<span>pref_dict, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Add the requested preferences to the database.
Preferences should be in the format {liquid, weight, height} with values either 1 for Imperial, 2 for metric.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_prefs(pref_dict, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Add the requested preferences to the database. 
    Preferences should be in the format {liquid, weight, height} with values either 1 for Imperial, 2 for metric. &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DROP TABLE IF EXISTS preferences;&#34;)
    cur.execute(&#34;CREATE TABLE preferences (liquidUnits DECIMAL DEFAULT 1, weightUnits DECIMAL DEFAULT 1, heightUnits INTEGER DEFAULT 1);&#34;)
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;INSERT INTO preferences (liquidUnits, weightUnits, heightUnits) VALUES (?, ?, ?);&#34;,(pref_dict[&#39;liquidUnits&#39;],pref_dict[&#39;weightUnits&#39;], pref_dict[&#39;heightUnits&#39;]))
    
    conn.commit()
    conn.close()
    #return error/success code</code></pre>
</details>
</dd>
<dt id="sql_functions.bathroom_recent_events"><code class="name flex">
<span>def <span class="ident">bathroom_recent_events</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Query the database for the top 5 most recent events in the bathroom table
Return values as list[EventID, Name, Date, Type, Comment]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bathroom_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the bathroom table
    Return values as list[EventID, Name, Date, Type, Comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    cur.execute(&#34;SELECT\
        bathroom.bathroomEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        bathroom.bathroomDateTime as &#39;Time&#39;,\
        bathroomType.bathroomTypeName as &#39;Type&#39;,\
        bathroom.bathroomComment as &#39;Comment&#39; FROM bathroom\
        LEFT JOIN babies ON bathroom.babyID = babies.babyID\
        LEFT JOIN bathroomType ON bathroom.bathroomType = bathroomType.bathroomTypeID\
        ORDER BY bathroomDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()
    bathroom_recent_lst = []
    for row in rows:
        row_array = [row[0], row[1], row[2], row[3], row[4]]
        bathroom_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return bathroom_recent_lst</code></pre>
</details>
</dd>
<dt id="sql_functions.bathroom_sql_ins"><code class="name flex">
<span>def <span class="ident">bathroom_sql_ins</span></span>(<span>value, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Insert bathroom values into database.
Values should be in the form dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string}</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bathroom_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;
    Insert bathroom values into database.
    Values should be in the form dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string} 
    &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]        #split dictionary into individual variables
    bathroomType = value[&#39;type&#39;]
    bathroomComment = value[&#39;comment&#39;]
    bathroomDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO bathroom (babyID, bathroomType, bathroomDateTime, bathroomComment) VALUES(?, ?, ?, ?);&#34;, (babyID, bathroomType, bathroomDateTime, bathroomComment))
    conn.commit()
    conn.close()
    # return error/success code</code></pre>
</details>
</dd>
<dt id="sql_functions.convert_units"><code class="name flex">
<span>def <span class="ident">convert_units</span></span>(<span>liquid, weight, height)</span>
</code></dt>
<dd>
<div class="desc"><p>Convert the units of measurement from imperial to metric.
Convert the units to that of preferences, pass in values for liquid, weight, and height.
If units are not necessary, pass in value of 0.
e.g for eat view, convert only liquids, pass values of (12, 0, 0).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_units(liquid, weight, height):
    &#34;&#34;&#34;Convert the units of measurement from imperial to metric.
    Convert the units to that of preferences, pass in values for liquid, weight, and height.
    If units are not necessary, pass in value of 0.
    e.g for eat view, convert only liquids, pass values of (12, 0, 0). 
    &#34;&#34;&#34;
    prefs = get_prefs()
    liquid_flag = prefs[0]
    weight_flag = prefs[1]
    height_flag = prefs[2]
    liquid_ret = liquid
    weight_ret = weight
    height_ret = height
    if(liquid_flag != 1):
        liquid_ret = liquid_ret * 29.5735
    if(weight_flag != 1):
        weight_ret = weight_ret * 0.453582    
    if(height_flag != 1):
        height_ret = height_ret * 2.54
    return(liquid_ret, weight_ret, height_ret)</code></pre>
</details>
</dd>
<dt id="sql_functions.delete_preferences"><code class="name flex">
<span>def <span class="ident">delete_preferences</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Deletes the preferences table</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_preferences(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Deletes the preferences table&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DELETE * FROM preferences;&#34;)

    conn.commit()
    conn.close()</code></pre>
</details>
</dd>
<dt id="sql_functions.delete_rows"><code class="name flex">
<span>def <span class="ident">delete_rows</span></span>(<span>table, eventID, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Deletes a selected row from a table.
Requires arguments of table and eventID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_rows(table, eventID, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Deletes a selected row from a table.
    Requires arguments of table and eventID. &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;DELETE FROM &#34; + str(table) + &#34;\
        WHERE &#34; + str(table) + &#34;EventID = &#34; + str(eventID) + &#34;;&#34;)
        #Example DELETE FROM sleep WHERE sleepEventID = 10;
        #This should be interchangeable between all menus assuming the naming convention works
    conn.commit()
    conn.close()</code></pre>
</details>
</dd>
<dt id="sql_functions.feed_recent_events"><code class="name flex">
<span>def <span class="ident">feed_recent_events</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Query the database for the top 5 most recent events in the feed table. Converts values from imperial/metric based on preferences.
Return values as list[EventID, Name, Date, leftDuration, rightDuration, totalduration, leftPumpQty, rightPumpQTY
totalPumpQTY, breastQTY, formulatQTY, comment]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def feed_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the feed table. Converts values from imperial/metric based on preferences.
    Return values as list[EventID, Name, Date, leftDuration, rightDuration, totalduration, leftPumpQty, rightPumpQTY
    totalPumpQTY, breastQTY, formulatQTY, comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()

    cur.execute(&#34;SELECT\
        feed.feedEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        feed.feedDateTime as &#39;Time&#39;,\
        feed.leftBreastDur as &#39;Left Breast, min&#39;,\
        feed.rightBreastDur as &#39;Right Breast, min&#39;,\
        feed.totalBreastDur as &#39;Total Breast, min&#39;,\
        feed.leftPumpQty as &#39;Left Pump Qty&#39;,\
        feed.rightPumpQty as &#39;Right Pump Qty&#39;,\
        feed.totalPumpQty as &#39;Total Pump Qty&#39;,\
        feed.bottleBreastQty as &#39;Bottle Breast Qty&#39;,\
        feed.bottleFormulaQty as &#39;Bottle Formula Qty&#39;,\
        feed.totalBottleQty as &#39;Total Bottle Qty&#39;,\
        feed.feedComment as &#39;Comment&#39; FROM feed\
        LEFT JOIN babies ON feed.babyID = babies.babyID\
        ORDER BY feedDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()

    feed_recent_lst = []
    for row in rows:
        feed = row[0]
        name = row[1]
        dateTime = row[2]
        leftBreast = row[3]
        rightBreast = row[4]
        totalBreast = row[5]
        
        leftPump = row[6]
        if(leftPump != None):
            leftPump = round(convert_units(leftPump,0,0)[0],2)

        rightPump = row[7]
        if(rightPump != None):
            rightPump = round(convert_units(rightPump,0,0)[0],2)
        
        totalPump = row[8]
        if(totalPump != None):
            totalPump = convert_units(totalPump,0,0)[0]

        bottleBreast = row[9]
        if(bottleBreast != None):
            bottleBreast = round(convert_units(bottleBreast,0,0)[0],2)

        bottleFormula = row[10]
        if(bottleFormula != None):
            bottleFormula = round(convert_units(bottleFormula,0,0)[0],2)

        totalBottle = row[11]
        if(totalBottle != None):
            totalBottle = convert_units(totalBottle,0,0)[0]

        comment = row[12]
        row_array = (feed, name, dateTime, leftBreast, rightBreast, totalBreast, leftPump, rightPump, totalPump, bottleBreast, bottleFormula, totalBottle, comment)
        feed_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return feed_recent_lst</code></pre>
</details>
</dd>
<dt id="sql_functions.feed_sql_ins"><code class="name flex">
<span>def <span class="ident">feed_sql_ins</span></span>(<span>value, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Insert values into the feed table.
Values are
converted from imperial/metric based on preferences table.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def feed_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Insert values into the feed table.
    Values are  converted from imperial/metric based on preferences table.
    &#34;&#34;&#34;
    
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]       #split dictionary into individual variables
    leftBreastDur, rightBreastDur, leftPumpQty, rightPumpQty, bottleBreastQty, bottleFormulaQty = None,None,None,None,None,None
    prefs = get_prefs()
    
    if(value[&#39;breastSide&#39;] == 1):
        leftBreastDur = value[&#39;duration&#39;]
    elif(value[&#39;breastSide&#39;] == 2):
        rightBreastDur = value[&#39;duration&#39;]
    elif(value[&#39;pumpSide&#39;] == 1):
        leftPumpQty = value[&#39;quantity&#39;]
        if(prefs[0] == 2):
            leftPumpQty = round(float(leftPumpQty) / 29.5735, 2)
    elif(value[&#39;pumpSide&#39;] == 2):
        rightPumpQty = value[&#39;quantity&#39;]
        if(prefs[0] == 2):
            rightPumpQty = round(float(rightPumpQty) / 29.5735, 2)
    elif(value[&#39;bottleType&#39;] == 1):
        bottleBreastQty = value[&#39;quantity&#39;] 
        if(prefs[0] == 2):
            bottleBreastQty = round(float(bottleBreastQty) / 29.5735, 2)
    elif(value[&#39;bottleType&#39;] == 2):
        bottleFormulaQty = value[&#39;quantity&#39;]  
        if(prefs[0] == 2):
            bottleFormulaQty = round(float(bottleFormulaQty) / 29.5735, 2) 
    feedComment = value[&#39;comment&#39;]
    feedDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO feed (\
        babyID,leftBreastDur,rightBreastDur,leftPumpQty,\
        rightPumpQty,bottleBreastQty,bottleFormulaQty,\
        feedDateTime, feedComment) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?);&#34;
        ,(babyID, leftBreastDur, rightBreastDur, leftPumpQty, rightPumpQty, bottleBreastQty, bottleFormulaQty, feedDateTime, feedComment))
    conn.commit()
    conn.close()</code></pre>
</details>
</dd>
<dt id="sql_functions.get_babies"><code class="name flex">
<span>def <span class="ident">get_babies</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Returns list of tuples from baby.db [(babyID, eventType, birthdate, firstName, lastName)]
Used to populate selection from baby drop down menus.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_babies(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Returns list of tuples from baby.db [(babyID, eventType, birthdate, firstName, lastName)]
    Used to populate selection from baby drop down menus.&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for all babies stored in db
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT * FROM babies&#34;)
    baby_lst = cur.fetchall()
    conn.close()
    return baby_lst</code></pre>
</details>
</dd>
<dt id="sql_functions.get_last_baby_bathroom"><code class="name flex">
<span>def <span class="ident">get_last_baby_bathroom</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Return the last used baby from the Bathroom table.
Returns INT of BabyID</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_last_baby_bathroom(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Bathroom table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in bathroom
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM bathroom ORDER BY bathroomDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid</code></pre>
</details>
</dd>
<dt id="sql_functions.get_last_baby_feed"><code class="name flex">
<span>def <span class="ident">get_last_baby_feed</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Return the last used baby from the Feed table.
Returns INT of BabyID</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_last_baby_feed(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Feed table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in sleep
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM feed ORDER BY feedDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid</code></pre>
</details>
</dd>
<dt id="sql_functions.get_last_baby_sleep"><code class="name flex">
<span>def <span class="ident">get_last_baby_sleep</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Return the last used baby from the Sleep table.
Returns INT of BabyID</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_last_baby_sleep(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Return the last used baby from the Sleep table.
    Returns INT of BabyID&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()   

    # query database for last babies stored in sleep
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;SELECT babyID FROM sleep ORDER BY sleepDateTime DESC LIMIT 1;&#34;)
    baby_lst = cur.fetchone()
    babyid = baby_lst[0] #take first tuple
    conn.close()
    return babyid</code></pre>
</details>
</dd>
<dt id="sql_functions.get_prefs"><code class="name flex">
<span>def <span class="ident">get_prefs</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the selected preferences of the table (1,1,1) (liquid, weight, height)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_prefs(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Returns the selected preferences of the table (1,1,1) (liquid, weight, height)&#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;) # enforce foreign key constraints
    cur.execute(&#34;SELECT * FROM preferences;&#34;)
    
    pref_lst = cur.fetchall()
    conn.close()
    pref_lst = pref_lst[0]
    #prefs = {&#34;liquid&#34;:pref_lst[0], &#34;weight&#34;:pref_lst[1], &#34;height&#34;:pref_lst[2]}
    return list(pref_lst)  # Jinja has issues passing tuples to javascript function. Change to list.      # return error/success code    </code></pre>
</details>
</dd>
<dt id="sql_functions.read_sql"><code class="name flex">
<span>def <span class="ident">read_sql</span></span>(<span>queryName)</span>
</code></dt>
<dd>
<div class="desc"><p>Queries the database with argument queryName</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_sql(queryName):
    &#34;&#34;&#34;Queries the database with argument queryName&#34;&#34;&#34;
    with open(queryName)as q:
        query_text = q.read()
    return query_text</code></pre>
</details>
</dd>
<dt id="sql_functions.reset_db"><code class="name flex">
<span>def <span class="ident">reset_db</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Reset the database to default values for testing purposes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset_db(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Reset the database to default values for testing purposes.&#34;&#34;&#34;
    # read sql file in stead of hard coding -
   
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateBabiesTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddBaby.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateBathroomTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddBathroom.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateSleepTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddSleep.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/CreateFeedTable.sql&#34;))
    cur.executescript(read_sql(&#34;./sqlite3/queryExamples/AddFeed.sql&#34;))

    conn.commit()
    conn.close()</code></pre>
</details>
</dd>
<dt id="sql_functions.sleep_recent_events"><code class="name flex">
<span>def <span class="ident">sleep_recent_events</span></span>(<span>db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Query the database for the top 5 most recent events in the sleep table
Return values as list[EventID, Name, Date, Type, Comment]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sleep_recent_events(db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Query the database for the top 5 most recent events in the sleep table
    Return values as list[EventID, Name, Date, Type, Comment] &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    cur.execute(&#34;SELECT\
        sleep.sleepEventID,\
        babies.firstName || &#39; &#39; || babies.lastName as &#39;Baby&#39;,\
        sleep.sleepDateTime as &#39;Time&#39;,\
        sleepType.sleepTypeName as &#39;Type&#39;,\
        sleep.sleepComment as &#39;Comment&#39;,\
        round(24 * (JULIANDAY(sleep.sleepDateTime) - LAG(JULIANDAY(sleep.sleepDateTime)) OVER (ORDER BY sleep.sleepDateTime)),1) AS &#39;Previous Duration, hrs&#39;\
        FROM sleep\
        LEFT JOIN babies ON sleep.babyID = babies.babyID\
        LEFT JOIN sleepType ON sleep.sleepType = sleepType.sleepTypeID\
        ORDER BY sleep.sleepDateTime DESC\
        LIMIT 5;&#34;)
    rows = cur.fetchall()
    
    sleep_recent_lst = []
    for row in rows:
        row_array = (row[0], row[1], row[2], row[3], row[4], row[5])
        sleep_recent_lst.append(row_array)

    conn.commit()
    conn.close()
    return sleep_recent_lst   </code></pre>
</details>
</dd>
<dt id="sql_functions.sleep_sql_ins"><code class="name flex">
<span>def <span class="ident">sleep_sql_ins</span></span>(<span>value, db_path='./sqlite3/baby.db')</span>
</code></dt>
<dd>
<div class="desc"><p>Insert values into the sleep table.
Values should be python dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string}</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sleep_sql_ins(value, db_path = &#34;./sqlite3/baby.db&#34;):
    &#34;&#34;&#34;Insert values into the sleep table.
    Values should be python dict: {babyID: int, type: int, comment: string, dateTime: valid dateTime string} &#34;&#34;&#34;
    conn = sqlite3.connect(db_path)       #connect to database
    cur = conn.cursor()
    babyID = value[&#39;babyId&#39;]        #split dictionary into individual variables
    sleepType = value[&#39;type&#39;]
    sleepComment = value[&#39;comment&#39;]
    sleepDateTime = value[&#39;dateTime&#39;]

    #execute sql insert statement
    cur.execute(&#34;PRAGMA foreign_keys = ON&#34;)
    cur.execute(&#34;INSERT INTO sleep (babyID, sleepType, sleepDateTime, sleepComment) VALUES(?, ?, ?, ?);&#34;, (babyID, sleepType, sleepDateTime, sleepComment))
    conn.commit()
    conn.close()
    # return error/success code</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sql_functions.Baby"><code class="flex name class">
<span>class <span class="ident">Baby</span></span>
<span>(</span><span>rows)</span>
</code></dt>
<dd>
<div class="desc"><p>Define class baby for unit testing.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Baby:
    &#34;&#34;&#34;Define class baby for unit testing. &#34;&#34;&#34;
    def __init__(self, rows):
        self.babyID = []
        self.eventType = []
        self.birthDate = []
        self.firstName = []
        self.lastName = []
        self.abbreviatedName = []
        self.birthWeight = []
        self.birthHeight = []
        for row in rows:
            self.babyID.append(row[0])
            self.eventType.append(row[1])
            self.birthDate.append(row[2])
            self.firstName.append(row[3])
            self.lastName.append(row[4])
            self.abbreviatedName.append(row[5])
            self.birthWeight.append(row[6])
            self.birthHeight.append(row[7])</code></pre>
</details>
</dd>
<dt id="sql_functions.Bathroom"><code class="flex name class">
<span>class <span class="ident">Bathroom</span></span>
<span>(</span><span>rows)</span>
</code></dt>
<dd>
<div class="desc"><p>Define class bathroom for unit testing.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Bathroom:
    &#34;&#34;&#34;Define class bathroom for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        self.bathroomEventID = []
        self.eventType = []
        self.babyID = []
        self.bathroomType = []
        self.bathroomDateTime = []
        self.bathroomComment = []
        for row in rows:
            self.bathroomEventID.append(row[0])
            self.eventType.append(row[1])
            self.babyID.append(row[2])
            self.bathroomType.append(row[3])
            self.bathroomDateTime.append(row[4])
            self.bathroomComment.append(row[5])</code></pre>
</details>
</dd>
<dt id="sql_functions.Feed"><code class="flex name class">
<span>class <span class="ident">Feed</span></span>
<span>(</span><span>rows)</span>
</code></dt>
<dd>
<div class="desc"><p>Define class Feed for unit testing.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Feed:
    &#34;&#34;&#34;Define class Feed for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        feedEventID = []
        eventType = []
        babyID = []
        leftBreastDur = []
        rigthBreastDur = []
        totalBreastDur = []
        leftPumpQty = []
        rightPumpQty = []
        totalPumpQty = []
        bottleBreastQty = []
        bottleFormulaQty = []
        totalBottleQty = []
        feedDateTime = []
        feedComment = []
        for row in rows:
            feedEventID.append(row[0])
            eventType.append(row[1])
            babyID.append(row[2])
            leftBreastDur.append(row[3])
            rigthBreastDur.append(row[4])
            totalBreastDur.append(row[5])
            leftPumpQty.append(row[6])
            rightPumpQty.append(row[7])
            totalPumpQty.append(row[8])
            bottleBreastQty.append(row[9])
            bottleFormulaQty.append(row[10])
            totalBottleQty.append(row[11])
            feedDateTime.append(row[12])
            feedComment.append(row[13])</code></pre>
</details>
</dd>
<dt id="sql_functions.Sleep"><code class="flex name class">
<span>class <span class="ident">Sleep</span></span>
<span>(</span><span>rows)</span>
</code></dt>
<dd>
<div class="desc"><p>Define sleep baby for unit testing.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Sleep:
    &#34;&#34;&#34;Define sleep baby for unit testing. &#34;&#34;&#34;

    def __init__(self, rows):
        self.sleepEventID = []
        self.eventType = []
        self.babyID = []
        self.sleepType = []
        self.sleepDateTime = []
        self.sleepComment = []
        for row in rows:
            self.sleepEventID.append(row[0])
            self.eventType.append(row[1])
            self.babyID.append(row[2])
            self.sleepType.append(row[3])
            self.sleepDateTime.append(row[4])
            self.sleepComment.append(row[5])</code></pre>
</details>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="sql_functions.add_baby" href="#sql_functions.add_baby">add_baby</a></code></li>
<li><code><a title="sql_functions.add_prefs" href="#sql_functions.add_prefs">add_prefs</a></code></li>
<li><code><a title="sql_functions.bathroom_recent_events" href="#sql_functions.bathroom_recent_events">bathroom_recent_events</a></code></li>
<li><code><a title="sql_functions.bathroom_sql_ins" href="#sql_functions.bathroom_sql_ins">bathroom_sql_ins</a></code></li>
<li><code><a title="sql_functions.convert_units" href="#sql_functions.convert_units">convert_units</a></code></li>
<li><code><a title="sql_functions.delete_preferences" href="#sql_functions.delete_preferences">delete_preferences</a></code></li>
<li><code><a title="sql_functions.delete_rows" href="#sql_functions.delete_rows">delete_rows</a></code></li>
<li><code><a title="sql_functions.feed_recent_events" href="#sql_functions.feed_recent_events">feed_recent_events</a></code></li>
<li><code><a title="sql_functions.feed_sql_ins" href="#sql_functions.feed_sql_ins">feed_sql_ins</a></code></li>
<li><code><a title="sql_functions.get_babies" href="#sql_functions.get_babies">get_babies</a></code></li>
<li><code><a title="sql_functions.get_last_baby_bathroom" href="#sql_functions.get_last_baby_bathroom">get_last_baby_bathroom</a></code></li>
<li><code><a title="sql_functions.get_last_baby_feed" href="#sql_functions.get_last_baby_feed">get_last_baby_feed</a></code></li>
<li><code><a title="sql_functions.get_last_baby_sleep" href="#sql_functions.get_last_baby_sleep">get_last_baby_sleep</a></code></li>
<li><code><a title="sql_functions.get_prefs" href="#sql_functions.get_prefs">get_prefs</a></code></li>
<li><code><a title="sql_functions.read_sql" href="#sql_functions.read_sql">read_sql</a></code></li>
<li><code><a title="sql_functions.reset_db" href="#sql_functions.reset_db">reset_db</a></code></li>
<li><code><a title="sql_functions.sleep_recent_events" href="#sql_functions.sleep_recent_events">sleep_recent_events</a></code></li>
<li><code><a title="sql_functions.sleep_sql_ins" href="#sql_functions.sleep_sql_ins">sleep_sql_ins</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sql_functions.Baby" href="#sql_functions.Baby">Baby</a></code></h4>
</li>
<li>
<h4><code><a title="sql_functions.Bathroom" href="#sql_functions.Bathroom">Bathroom</a></code></h4>
</li>
<li>
<h4><code><a title="sql_functions.Feed" href="#sql_functions.Feed">Feed</a></code></h4>
</li>
<li>
<h4><code><a title="sql_functions.Sleep" href="#sql_functions.Sleep">Sleep</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>